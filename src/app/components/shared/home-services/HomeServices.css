/* ========================== */
/* heights + glass band control */
/* ========================== */
:root {
  --hs-grid-gap: 28px;
  --hs-radius: 24px;

  /* Taller cards (desktop default) */
  --hs-card-h: 600px;       /* was 420px */

  /* How tall the glass band is (percentage of card height) */
  --hs-glass-pct: 34%;

  /* Motion */
  --hs-reveal-dur: 900ms;
  --hs-reveal-ease: cubic-bezier(.22,.61,.36,1);
  --hs-stagger-step: 140ms;

  /* Card sequencing */
  --hs-card-dur: 900ms;
  --hs-card-gap: 160ms;
}

/* ========================== */
/* Section background & text  */
/* ========================== */
.homeServices {
  padding: 0;
  /* keep your base/dark blend for non-light/dark mode targets */
  background: color-mix(in oklab, var(--color-dark) 10%, var(--color-light));
  color: #fff; /* clearer text on busy bg */
  background-image:
    radial-gradient(1200px 600px at 15% -10%, color-mix(in oklab, var(--color-white) 70%, transparent), transparent 55%),
    linear-gradient(180deg, color-mix(in oklab, var(--color-white) 18%, transparent), transparent 40%);

  /* overlay system needs positioning */
  position: relative;
}

/* --- Dark overlay above background, below content --- */
.homeServices::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.48); /* tweak strength to taste */
  pointer-events: none;
  z-index: 0; /* below content */
}
/* ensure section children render above overlay */
.homeServices > * {
  position: relative;
  z-index: 1;
}

/* Light mode keeps your stripe background + overlay + white text */
.light-mode .homeServices {
  padding: 0;
  color: #fff;

  /* Base color fallback (shows through transparencies) */
  background-color: var(--color-light);

  /* Your layered background */
  background-image:
    radial-gradient(circle at center center, transparent, rgb(228,238,240)),
    repeating-linear-gradient(
      135deg,
      rgb(228,238,240) 0px, rgb(228,238,240) 12px,
      transparent 12px, transparent 19px,
      rgb(228,238,240) 19px, rgb(228,238,240) 24px,
      transparent 24px, transparent 28px
    ),
    repeating-linear-gradient(
      45deg,
      rgb(7,80,86) 0px, rgb(7,80,86) 7px,
      transparent 7px, transparent 14px
    ),
    /* bottom layer */
    linear-gradient(90deg, rgb(228,238,240), rgb(228,238,240));
}
.light-mode .homeServices::before {
  background: rgba(0, 0, 0, 0.48);
}

/* Upgrade the base color where supported */
@supports (background: color-mix(in oklab, #000 10%, #fff)) {
  .homeServices {
    background-color: color-mix(in oklab, var(--color-dark) 10%, var(--color-light));
  }
}

/* ==== Dark mode adapted to your palette (#16232a / #ff5b04) ==== */
.dark-mode .homeServices {
  /* solid base under the pattern */
  background-color: var(--color-dark);
  color: #fff;
  /* same layer order as light mode, recolored */
  background-image:
    radial-gradient(circle at center center, transparent,
      /* a soft tint toward the base color */
      color-mix(in oklab, var(--color-dark) 25%, #0000)
    ),
    repeating-linear-gradient(
      135deg,
      /* “band” color = the dark base */
      var(--color-dark) 0px, var(--color-dark) 12px,
      transparent 12px, transparent 19px,
      var(--color-dark) 19px, var(--color-dark) 24px,
      transparent 24px, transparent 28px
    ),
    repeating-linear-gradient(
      45deg,
      /* accent stripes; slightly transparent so they don’t overpower */
      color-mix(in oklab, var(--color-accent) 85%, #0000) 0px,
      color-mix(in oklab, var(--color-accent) 85%, #0000) 7px,
      transparent 7px, transparent 14px
    ),
    /* bottom layer */
    linear-gradient(90deg, var(--color-dark), var(--color-dark));
}

/* Keep the overlay a touch lighter than light-mode so contrast stays nice */
.dark-mode .homeServices::before {
  background: rgba(0, 0, 0, 0.36);
}


.homeServices__inner {
  max-width: 1440px; margin: 0 auto; padding: 56px 6vw 28px;
}

/* ========================== */
/* Intro (centered; bottom→top fades) */
/* ========================== */
.homeServices__header { padding: 0 0 20px; text-align: center; }

.homeServices__title {
  font-family: var(--font-secondary);
  color: currentColor;
  font-size: clamp(32px, 3.6vw, 56px); /* bumped up from 26/40 */
  line-height: 1.15;
  letter-spacing: .2px;
  text-shadow: 0 2px 6px rgba(0,0,0,.25);
  opacity: 0; transform: translateY(28px);
}

.homeServices__subtitle {
  color: color-mix(in oklab, #ffffff 88%, transparent);
  font-size: clamp(16px, 1.4vw, 22px); /* bumped up */
  line-height: 1.6;
  text-shadow: 0 1px 4px rgba(0,0,0,.2);
  opacity: 0; transform: translateY(28px);
  margin: 12px auto 0;
  width: min(70%, 65ch);
}

.homeServices__header.is-visible .homeServices__title {
  animation: hs-slideUpFade var(--hs-reveal-dur) var(--hs-reveal-ease) forwards;
  animation-delay: 80ms;
}
.homeServices__header.is-visible .homeServices__subtitle {
  animation: hs-slideUpFade var(--hs-reveal-dur) var(--hs-reveal-ease) forwards;
  animation-delay: 260ms;
}

/* ========================== */
/* Grid */
/* ========================== */
.homeServices__grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--hs-grid-gap);
  align-items: stretch;
}

/* ========================== */
/* Card base (taller) */
/* ========================== */
.homeServices__card { isolation: isolate; }

.homeServices__card--glass {
  position: relative;
  border-radius: var(--hs-radius);
  overflow: clip;
  height: var(--hs-card-h); /* taller */
  background: color-mix(in oklab, var(--color-dark) 85%, black);
  box-shadow: 0 12px 28px color-mix(in oklab, black 18%, transparent), 0 2px 8px color-mix(in oklab, black 10%, transparent);
  transform: translateZ(0);
}

/* Media */
.homeServices__media {
  position: absolute; inset: 0;
  background-size: cover; background-position: center;
  transform: scale(1.02);
  transition: transform 520ms var(--hs-reveal-ease), filter 520ms var(--hs-reveal-ease);
  will-change: transform, filter;
  z-index: 0;
}
.homeServices__card--glass:hover .homeServices__media {
  transform: scale(1.055);
  filter: saturate(1.06) contrast(1.05) brightness(.97);
}

/* ========================== */
/* Glass overlay (shallower, lower band) */
/* ========================== */
.homeServices__glass {
  position: absolute;
  left: 0; right: 0; bottom: 0;
  /* make it a bottom band rather than a tall panel */
  min-height: calc(var(--hs-card-h) * var(--hs-glass-pct));
  padding: 16px 20px 18px;
  display: grid; gap: 10px;
  z-index: 1;
  color: color-mix(in oklab, var(--color-light) 95%, var(--color-white));
  background:
    linear-gradient(
      to top,
      color-mix(in oklab, black 62%, transparent) 0%,
      color-mix(in oklab, black 38%, transparent) 48%,
      color-mix(in oklab, black 12%, transparent) 82%,
      transparent 100%
    );
}
@supports (backdrop-filter: blur(6px)) {
  .homeServices__glass { backdrop-filter: blur(6px) saturate(110%); }
}

/* Meta / text inside cards */
.homeServices__metaTop { display: flex; align-items: center; justify-content: space-between; opacity: .95; }
.homeServices__dots { letter-spacing: 2px; }
.homeServices__priceBadge {
  background: color-mix(in oklab, black 45%, transparent);
  color: color-mix(in oklab, var(--color-light) 92%, var(--color-white));
  border: 1px solid color-mix(in oklab, var(--color-white) 25%, transparent);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 13px; /* bumped from 12px */
  font-weight: 800;
}
.homeServices__titleGlass {
  font-family: var(--font-secondary);
  font-size: clamp(20px, 1.8vw, 26px); /* bumped */
  color: color-mix(in oklab, var(--color-white) 98%, var(--color-light));
  letter-spacing: .15px;
}
.homeServices__desc {
  font-size: 15.5px; /* bumped from 14px */
  color: color-mix(in oklab, var(--color-light) 85%, var(--color-white));
}

/* Keep CTA components' own styles — no overrides */
.homeServices__ctaRow { display: flex; gap: 12px; align-items: center; margin-top: 6px; flex-wrap: wrap; }

/* Badge */
.homeServices__badge {
  position: absolute; top: 10px; right: 10px;
  padding: 4px 10px; font-size: 12px;
  border-radius: 999px;
  background: color-mix(in oklab, var(--color-accent) 92%, var(--color-white));
  color: color-mix(in oklab, var(--color-dark) 96%, black);
  font-weight: 800; letter-spacing: .25px;
  box-shadow: 0 4px 10px color-mix(in oklab, black 22%, transparent);
  z-index: 2;
}

/* ========================== */
/* CTA Banner */
/* ========================== */
.homeServices__ctaBanner {
  margin-top: 56px;
  text-align: center;
  display: flex; flex-direction: column;
  gap: 16px; align-items: center; justify-content: center;
  padding: 28px 20px; border-radius: 18px;
  background: transparent; box-shadow: none;
}
.homeServices__ctaBanner p {
  font-size: 20px; /* was 18px */
  font-weight: 500; color: currentColor;
  opacity: 0; transform: translateX(34px);
}
.homeServices__ctaBanner .cta-button { opacity: 0; transform: translateX(-34px); }
.homeServices__ctaBanner.is-visible p {
  animation: hs-slideInRightFade var(--hs-reveal-dur) var(--hs-reveal-ease) forwards;
  animation-delay: 140ms;
}
.homeServices__ctaBanner.is-visible .cta-button {
  animation:
    hs-slideInLeftFade var(--hs-reveal-dur) var(--hs-reveal-ease) forwards,
    hs-bounceY 5.5s ease-in-out 1.2s infinite;
}

/* ========================== */
/* Reveal system */
/* ========================== */
[data-animate] {
  opacity: 0;
  transform: translateY(26px);
  transition:
    opacity var(--hs-reveal-dur) var(--hs-reveal-ease),
    transform var(--hs-reveal-dur) var(--hs-reveal-ease);
  transition-delay: calc((var(--stagger, 0) * var(--hs-stagger-step)));
  will-change: opacity, transform;
}
[data-animate].is-visible { opacity: 1; transform: translateY(0); }

/* Cards — desktop: slide from left + gentle barrel roll; truly sequential */
.homeServices__card[data-animate] {
  opacity: 0;
  transform: translateX(-44px) rotateZ(-6deg);
  transform-origin: 50% 60%;
  filter: saturate(.94) contrast(.96);
}
.homeServices__card.is-visible {
  opacity: 1;
  transform: translateX(0) rotateZ(0deg);
  filter: none;
  transition:
    opacity var(--hs-card-dur) var(--hs-reveal-ease),
    transform var(--hs-card-dur) var(--hs-reveal-ease);
  transition-delay: calc(var(--stagger, 0) * (var(--hs-card-dur) + var(--hs-card-gap)));
}

/* ========================== */
/* Keyframes */
/* ========================== */
@keyframes hs-slideUpFade {
  from { opacity: 0; transform: translateY(28px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes hs-slideInRightFade {
  from { opacity: 0; transform: translateX(34px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes hs-slideInLeftFade {
  from { opacity: 0; transform: translateX(-34px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes hs-bounceY {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-6px); }
}

/* ========================== */
/* Reduced motion */
/* ========================== */
@media (prefers-reduced-motion: reduce) {
  [data-animate],
  .homeServices__title,
  .homeServices__subtitle,
  .homeServices__ctaBanner p,
  .homeServices__ctaBanner .cta-button,
  .homeServices__card[data-animate] {
    opacity: 1 !important; transform: none !important; transition: none !important; animation: none !important;
  }
}

/* ========================== */
/* Responsive (taller everywhere, but proportionate) */
/* ========================== */
@media (max-width: 1200px) {
  :root { --hs-card-h: 560px; --hs-glass-pct: 36%; }
}
@media (max-width: 992px) {
  .homeServices__grid { grid-template-columns: 1fr 1fr; gap: 22px; }
  :root { --hs-card-h: 500px; --hs-glass-pct: 38%; }
  .homeServices__card.is-visible { transition-delay: 0ms; } /* per-viewport trigger on smaller screens */
}
@media (max-width: 640px) {
  .homeServices__grid { grid-template-columns: 1fr; gap: 16px; }
  :root { --hs-card-h: 440px; --hs-radius: 20px; --hs-glass-pct: 42%; } /* a bit taller than before */
  .homeServices__subtitle { width: min(90%, 60ch); }
}
